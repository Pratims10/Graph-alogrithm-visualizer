{"ast":null,"code":"var _jsxFileName = \"H:\\\\React\\\\Graph\\\\graph-algorithm-visualizer\\\\src\\\\components\\\\ShortestPath.js\";\nimport React, { Component } from 'react';\nlet v1 = null,\n    v2 = null;\nlet adj = [];\nvar delay = 1000;\nlet weights = [];\nvar r = 14;\nvar INT_MAX = 100000;\nlet parent = [];\nlet color1 = 'rgb(0, 204, 0)';\nlet done = false;\nlet timeouts = [];\nexport class ShortestPath extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      points: [],\n      edges: [],\n      src: 0\n    };\n  }\n\n  componentDidMount() {\n    this.generateRandomGraph();\n  }\n\n  randomWeights() {\n    for (let i = 0; i < this.state.edges.length; i++) weights[i] = getRandomInt(1, 50);\n\n    this.reset();\n    this.forceUpdate();\n  }\n\n  addWeights() {\n    weights.push(getRandomInt(1, 50));\n    this.forceUpdate();\n  }\n\n  getMousePosition(event) {\n    this.reset();\n    done = false;\n    let x = event.clientX - this.refs.svg.getBoundingClientRect().left;\n    let y = event.clientY - this.refs.svg.getBoundingClientRect().top;\n\n    for (let i = 0; i < this.state.points.length; i++) {\n      let x1 = this.state.points[i].x;\n      let y1 = this.state.points[i].y;\n      let dist = (x - x1) * (x - x1) + (y - y1) * (y - y1);\n      if (dist <= 1000) return;\n    }\n\n    this.setState(prev => {\n      points: prev.points.push({\n        x: x,\n        y: y\n      });\n    }, function () {\n      adj.push([]);\n    });\n    this.forceUpdate();\n  }\n\n  changeSrc(e) {\n    this.reset();\n    done = false;\n    let x = document.getElementById('src').value;\n    this.setState({\n      src: x\n    });\n  }\n\n  drawLine(idx) {\n    this.reset();\n    done = false;\n    let u = document.getElementById(`point${idx}`);\n    u.style.fill = 'red';\n    if (v1 === null) v1 = idx;else {\n      v2 = idx;\n      u = document.getElementById(`point${v1}`);\n      u.style.fill = 'orange';\n      u = document.getElementById(`point${v2}`);\n      u.style.fill = 'orange';\n\n      for (let i = 0; i < this.state.edges.length; i++) {\n        if (this.state.edges[i].u === v1 && this.state.edges[i].v === v2) {\n          v1 = null;\n          v2 = null;\n          return;\n        } else if (this.state.edges[i].u === v2 && this.state.edges[i].v === v1) {\n          v1 = null;\n          v2 = null;\n          return;\n        }\n      }\n\n      if (v1 === v2) {\n        v1 = null;\n        v2 = null;\n        return;\n      }\n\n      this.setState(prev => {\n        edges: prev.edges.push({\n          u: v1,\n          v: v2\n        });\n      }, function () {\n        this.addWeights();\n        adj[v1].push({\n          vertex: v2,\n          edgeNo: this.state.edges.length - 1\n        });\n        adj[v2].push({\n          vertex: v1,\n          edgeNo: this.state.edges.length - 1\n        });\n        v1 = null;\n        v2 = null;\n      });\n      this.forceUpdate();\n    }\n  }\n\n  reset() {\n    done = false;\n\n    for (let i = 0; i < this.state.points.length; i++) {\n      if (document.getElementById(`point${i}`).style.fill !== 'red') document.getElementById(`point${i}`).style.fill = 'orange';\n    }\n\n    for (let i = 0; i < this.state.edges.length; i++) {\n      document.getElementById(`edge${i}`).style.stroke = 'red';\n    }\n\n    for (let i = 0; i < this.state.points.length; i++) {\n      document.getElementById(`dist${i}`).textContent = '∞';\n    }\n\n    parent = [];\n    this.forceUpdate();\n  }\n\n  clear() {\n    done = false;\n    this.setState({\n      points: [],\n      edges: [],\n      dist: []\n    }, function () {\n      v1 = null;\n      v2 = null;\n      adj = [];\n      weights = [];\n      parent = [];\n    });\n    this.forceUpdate();\n  } //GENERATE RANDOM GRAPH\n\n\n  generateRandomGraph() {\n    for (let i = 1; i <= 3; i++) {\n      if (i === 1) setTimeout(() => {\n        this.getMousePosition({\n          clientX: 300,\n          clientY: 300\n        });\n      }, i * delay);else if (i === 2) setTimeout(() => {\n        this.getMousePosition({\n          clientX: 100,\n          clientY: 100\n        });\n      }, i * delay);else if (i === 3) setTimeout(() => {\n        this.getMousePosition({\n          clientX: 600,\n          clientY: 600\n        });\n      }, i * delay);\n    }\n  }\n\n  showPath(s) {\n    if (done === false) return;\n    let i = parent[s];\n    if (typeof i === \"undefined\") return;\n\n    while (i.vertex !== -1) {\n      document.getElementById(`edge${i.edgeNo}`).style.stroke = 'yellow';\n      document.getElementById(`point${i.vertex}`).style.fill = 'yellow';\n      i = parent[i.vertex];\n    }\n  }\n\n  removePath(s) {\n    if (done === false) return;\n    let i = parent[s];\n    if (typeof i === \"undefined\") return;\n\n    while (i.vertex !== -1) {\n      document.getElementById(`edge${i.edgeNo}`).style.stroke = 'blue';\n      document.getElementById(`point${i.vertex}`).style.fill = color1;\n      i = parent[i.vertex];\n    }\n  } //DJIKSTRA'S SHORTEST PATH ALGORITHM\n\n\n  minDist(dist, sptSet) {\n    // Initialize min value \n    let min = INT_MAX,\n        min_index;\n\n    for (let v = 0; v < this.state.points.length; v++) if (sptSet[v] === false && dist[v] <= min) {\n      min = dist[v];\n      min_index = v;\n    }\n\n    return min_index;\n  }\n\n  dijkstraAnimations(s) {\n    this.reset();\n    let ar = [];\n\n    for (let i = 0; i < this.state.points.length; i++) {\n      ar.push([]);\n\n      for (let j = 0; j < this.state.points.length; j++) ar[i].push(0);\n    } //forming adj matrix\n\n\n    for (let i = 0; i < this.state.edges.length; i++) {\n      ar[this.state.edges[i].u][this.state.edges[i].v] = {\n        wt: weights[i],\n        edgeNo: i\n      };\n      ar[this.state.edges[i].v][this.state.edges[i].u] = {\n        wt: weights[i],\n        edgeNo: i\n      };\n    }\n\n    let vis = [];\n\n    for (let i = 0; i < this.state.points.length; i++) vis[i] = false;\n\n    let animations = [];\n    let dist = [];\n    parent = [];\n\n    for (let i = 0; i < this.state.points.length; i++) dist[i] = 100000;\n\n    dist[s] = 0;\n    parent[s] = {\n      vertex: -1,\n      edgeNo: -1\n    };\n    animations.push({\n      x: s,\n      y: 0,\n      color: 'setdist'\n    });\n\n    for (let it = 0; it < this.state.points.length; it++) {\n      let u = this.minDist(dist, vis);\n      if (dist[u] === INT_MAX) return animations;\n      vis[u] = true;\n      animations.push({\n        x: u,\n        y: -1,\n        color: 'confirmdist'\n      });\n\n      for (let v = 0; v < this.state.points.length; v++) {\n        if (!vis[v] && ar[u][v].wt && dist[u] + ar[u][v].wt < dist[v]) {\n          parent[v] = {\n            vertex: u,\n            edgeNo: ar[u][v].edgeNo\n          };\n          dist[v] = dist[u] + ar[u][v].wt;\n          animations.push({\n            x: ar[u][v].edgeNo,\n            y: -1,\n            color: 'edge'\n          });\n          animations.push({\n            x: v,\n            y: dist[v],\n            color: 'setdist'\n          });\n        }\n      }\n    }\n\n    return animations;\n  }\n\n  dijkstra(s) {\n    if (s >= this.state.points.length) return;\n    const animations = this.dijkstraAnimations(s);\n    let len = animations.length;\n\n    for (let i = 0; i < len; i++) {\n      if (animations[i].color === 'edge') {\n        let tm = setTimeout(() => {\n          let q = document.getElementById(`edge${animations[i].x}`);\n          q.style.stroke = 'blue';\n        }, i * delay);\n        timeouts.push(tm);\n      } else if (animations[i].color === 'setdist') {\n        let tm = setTimeout(() => {\n          let q = document.getElementById(`point${animations[i].x}`);\n          q.style.fill = 'blue';\n          q = document.getElementById(`dist${animations[i].x}`);\n          q.textContent = animations[i].y;\n        }, i * delay);\n        timeouts.push(tm);\n      } else {\n        let tm = setTimeout(() => {\n          let q = document.getElementById(`point${animations[i].x}`);\n          q.style.fill = color1;\n        }, i * delay);\n        timeouts.push(tm);\n      }\n    }\n\n    done = true;\n  }\n\n  render() {\n    var pts = this.state.points.map((x, idx) => {\n      return React.createElement(\"circle\", {\n        key: \"point\" + idx,\n        id: \"point\" + idx,\n        cx: x.x,\n        cy: x.y,\n        r: r,\n        stroke: \"black\",\n        onClick: event => this.drawLine(idx),\n        strokeWidth: \".5\",\n        style: {\n          fill: \"orange\",\n          zIndex: '1',\n          transition: 'all .2s linear',\n          cursor: 'pointer'\n        },\n        onMouseOver: () => this.showPath(idx),\n        onMouseOut: () => this.removePath(idx),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 312\n        },\n        __self: this\n      });\n    });\n    var ptsidx = this.state.points.map((pt, idx) => {\n      return React.createElement(\"text\", {\n        key: \"index\" + idx,\n        id: \"index\" + idx,\n        fontSize: \"14\",\n        fontFamily: \"Arial\",\n        x: pt.x - 4,\n        y: pt.y + 4,\n        onClick: event => this.drawLine(idx),\n        style: {\n          zIndex: '1',\n          fill: \"#fff\",\n          transition: 'all .2s linear',\n          cursor: 'pointer'\n        },\n        onMouseOver: () => this.showPath(idx),\n        onMouseOut: () => this.removePath(idx),\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 317\n        },\n        __self: this\n      }, idx);\n    });\n    var lines = this.state.edges.map((q, idx) => {\n      return React.createElement(\"line\", {\n        key: \"edge\" + idx,\n        id: \"edge\" + idx,\n        x1: this.state.points[q.u].x,\n        y1: this.state.points[q.u].y,\n        x2: this.state.points[q.v].x,\n        y2: this.state.points[q.v].y,\n        style: {\n          stroke: 'red',\n          strokeWidth: '2',\n          zIndex: '-1',\n          transition: 'all .2s linear'\n        },\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 322\n        },\n        __self: this\n      });\n    });\n    var edgeWeights = this.state.edges.map((edge, idx) => {\n      return React.createElement(\"text\", {\n        key: \"weight\" + idx,\n        id: \"weight\" + idx,\n        fontSize: \"14\",\n        fontFamily: \"Arial\",\n        fill: \"#000\",\n        x: (this.state.points[edge.u].x + this.state.points[edge.v].x) / 2.0,\n        y: (this.state.points[edge.u].y + this.state.points[edge.v].y) / 2.0,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 327\n        },\n        __self: this\n      }, weights[idx]);\n    });\n    var dists = this.state.points.map((x, idx) => {\n      return React.createElement(\"text\", {\n        key: \"dist\" + idx,\n        id: \"dist\" + idx,\n        fontSize: \"14\",\n        fontFamily: \"Arial\",\n        fill: \"#000\",\n        x: x.x + r + 2,\n        y: x.y + r + 2,\n        __source: {\n          fileName: _jsxFileName,\n          lineNumber: 332\n        },\n        __self: this\n      }, \"\\u221E\");\n    });\n    return React.createElement(\"div\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 336\n      },\n      __self: this\n    }, React.createElement(\"center\", {\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 337\n      },\n      __self: this\n    }, React.createElement(\"button\", {\n      onClick: () => this.dijkstra(this.state.src),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 338\n      },\n      __self: this\n    }, \"Djikstra's Algorithm\"), React.createElement(\"button\", {\n      onClick: () => this.randomWeights(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 339\n      },\n      __self: this\n    }, \"Randomize edge weights\"), React.createElement(\"button\", {\n      onClick: () => this.reset(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 340\n      },\n      __self: this\n    }, \"Reset\"), React.createElement(\"button\", {\n      onClick: () => this.clear(),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 341\n      },\n      __self: this\n    }, \"Clear Canvas\"), \"\\xA0\\xA0\\xA0Enter source vertex \\xA0\", React.createElement(\"input\", {\n      type: \"text\",\n      id: \"src\",\n      value: this.state.src,\n      onChange: e => this.changeSrc(e),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 343\n      },\n      __self: this\n    })), React.createElement(\"svg\", {\n      paintOrder: \"markers\",\n      ref: \"svg\",\n      width: window.innerWidth,\n      height: window.innerHeight * 0.9,\n      style: {\n        border: '1px dotted black',\n        backgroundColor: 'rgb(251, 250, 255)',\n        cursor: 'crosshair'\n      },\n      onClick: event => this.getMousePosition(event),\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 345\n      },\n      __self: this\n    }, pts, ptsidx, lines, edgeWeights, dists));\n  }\n\n}\nexport default ShortestPath;\n\nfunction getRandomInt(min, max) {\n  min = Math.ceil(min);\n  max = Math.floor(max);\n  return Math.floor(Math.random() * (max - min + 1)) + min;\n}","map":{"version":3,"sources":["H:/React/Graph/graph-algorithm-visualizer/src/components/ShortestPath.js"],"names":["React","Component","v1","v2","adj","delay","weights","r","INT_MAX","parent","color1","done","timeouts","ShortestPath","constructor","props","state","points","edges","src","componentDidMount","generateRandomGraph","randomWeights","i","length","getRandomInt","reset","forceUpdate","addWeights","push","getMousePosition","event","x","clientX","refs","svg","getBoundingClientRect","left","y","clientY","top","x1","y1","dist","setState","prev","changeSrc","e","document","getElementById","value","drawLine","idx","u","style","fill","v","vertex","edgeNo","stroke","textContent","clear","setTimeout","showPath","s","removePath","minDist","sptSet","min","min_index","dijkstraAnimations","ar","j","wt","vis","animations","color","it","dijkstra","len","tm","q","render","pts","map","zIndex","transition","cursor","ptsidx","pt","lines","strokeWidth","edgeWeights","edge","dists","window","innerWidth","innerHeight","border","backgroundColor","max","Math","ceil","floor","random"],"mappings":"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","sourcesContent":["import React, { Component } from 'react'\r\nlet v1=null,v2=null;\r\nlet adj=[]\r\nvar delay=1000\r\nlet weights=[]\r\nvar r=14\r\nvar INT_MAX=100000\r\nlet parent=[]\r\nlet color1='rgb(0, 204, 0)';\r\nlet done=false\r\nlet timeouts=[]\r\nexport class ShortestPath extends Component {\r\n    constructor(props) {\r\n        super(props)\r\n    \r\n        this.state = {\r\n             points:[],\r\n             edges:[],\r\n             src:0\r\n        }\r\n    }\r\n\r\n    componentDidMount(){\r\n        this.generateRandomGraph()\r\n    }\r\n    randomWeights(){\r\n        for(let i=0;i<this.state.edges.length;i++)\r\n        weights[i]=getRandomInt(1,50);\r\n        this.reset()\r\n        this.forceUpdate();\r\n    }\r\n    addWeights()\r\n    {\r\n        weights.push(getRandomInt(1,50))\r\n        this.forceUpdate()\r\n    }\r\n    getMousePosition(event)\r\n    {\r\n        this.reset()\r\n        done=false\r\n        let x = event.clientX-this.refs.svg.getBoundingClientRect().left ;\r\n        let y = event.clientY-this.refs.svg.getBoundingClientRect().top;\r\n        for(let i=0;i<this.state.points.length;i++)\r\n        {\r\n            let x1=this.state.points[i].x;\r\n            let y1=this.state.points[i].y;\r\n            let dist=(x-x1)*(x-x1)+(y-y1)*(y-y1);\r\n            if(dist<=1000)\r\n                return;\r\n        }\r\n        this.setState((prev)=>{\r\n            points:prev.points.push({x:x,y:y})\r\n        },function(){\r\n            adj.push([])\r\n        })\r\n        this.forceUpdate();\r\n    }\r\n\r\n    changeSrc(e){\r\n        this.reset()\r\n        done=false\r\n        let x=document.getElementById('src').value\r\n        this.setState({\r\n            src:x\r\n        })\r\n    }\r\n\r\n    drawLine(idx){\r\n        this.reset()\r\n        done=false\r\n        let u=document.getElementById(`point${idx}`);\r\n        u.style.fill='red';\r\n        if(v1===null)\r\n        v1=idx;\r\n        else {\r\n            v2=idx;\r\n            u=document.getElementById(`point${v1}`);\r\n            u.style.fill='orange';\r\n            u=document.getElementById(`point${v2}`);\r\n            u.style.fill='orange';\r\n            for(let i=0;i<this.state.edges.length;i++)\r\n            {\r\n                if(this.state.edges[i].u===v1 && this.state.edges[i].v===v2)\r\n                {   v1=null\r\n                    v2=null\r\n                    return;\r\n                }\r\n                else if(this.state.edges[i].u===v2 && this.state.edges[i].v===v1)\r\n                {\r\n                    v1=null\r\n                    v2=null\r\n                    return;\r\n                }\r\n            }\r\n            if(v1===v2)\r\n            {\r\n                v1=null\r\n                v2=null\r\n                return\r\n            }\r\n            this.setState((prev)=>{\r\n                edges:prev.edges.push({\r\n                    u:v1,\r\n                    v:v2\r\n                })\r\n            },function(){\r\n                this.addWeights()\r\n                adj[v1].push({vertex:v2,edgeNo:this.state.edges.length-1})\r\n                adj[v2].push({vertex:v1,edgeNo:this.state.edges.length-1})\r\n                v1=null\r\n                v2=null\r\n            })\r\n            this.forceUpdate()\r\n        }\r\n    }\r\n\r\n    reset(){\r\n        done=false\r\n        for(let i=0;i<this.state.points.length;i++){\r\n            if(document.getElementById(`point${i}`).style.fill!=='red')\r\n            document.getElementById(`point${i}`).style.fill='orange'\r\n        }\r\n        for(let i=0;i<this.state.edges.length;i++)\r\n        {\r\n            document.getElementById(`edge${i}`).style.stroke='red'\r\n        }\r\n        for(let i=0;i<this.state.points.length;i++)\r\n        {\r\n            document.getElementById(`dist${i}`).textContent='∞';\r\n        }\r\n        parent=[]\r\n        this.forceUpdate();\r\n    }\r\n    clear(){\r\n        done=false\r\n        this.setState({\r\n            points:[],\r\n            edges:[],\r\n            dist:[]\r\n        },function(){\r\n            v1=null\r\n            v2=null\r\n            adj=[]\r\n            weights=[]\r\n            parent=[]\r\n        })\r\n        this.forceUpdate();\r\n    }\r\n\r\n    //GENERATE RANDOM GRAPH\r\n    generateRandomGraph(){\r\n        for(let i=1;i<=3;i++)\r\n        {\r\n            if(i===1)\r\n            setTimeout(() => {\r\n                this.getMousePosition({clientX:300,clientY:300})\r\n            }, i*delay);\r\n            else if(i===2)\r\n            setTimeout(() => {\r\n                this.getMousePosition({clientX:100,clientY:100})\r\n            }, i*delay);\r\n            else if(i===3)\r\n            setTimeout(() => {\r\n                this.getMousePosition({clientX:600,clientY:600})\r\n            }, i*delay);\r\n        }\r\n    }\r\n\r\n    showPath(s){\r\n        if(done===false)\r\n        return\r\n        let i=parent[s]\r\n        if(typeof i===\"undefined\")\r\n        return\r\n        while(i.vertex!==-1)\r\n        {\r\n            document.getElementById(`edge${i.edgeNo}`).style.stroke='yellow'\r\n            document.getElementById(`point${i.vertex}`).style.fill='yellow'\r\n            i=parent[i.vertex]\r\n        }\r\n    }\r\n\r\n    removePath(s){\r\n        if(done===false)\r\n        return\r\n        let i=parent[s]\r\n        if(typeof i===\"undefined\")\r\n        return\r\n        while(i.vertex!==-1)\r\n        {\r\n            document.getElementById(`edge${i.edgeNo}`).style.stroke='blue'\r\n            document.getElementById(`point${i.vertex}`).style.fill=color1\r\n            i=parent[i.vertex]\r\n        }\r\n    }\r\n\r\n    //DJIKSTRA'S SHORTEST PATH ALGORITHM\r\n    minDist(dist,sptSet) \r\n    {\r\n        // Initialize min value \r\n        let min = INT_MAX, min_index; \r\n        for (let v = 0; v < this.state.points.length; v++) \r\n            if (sptSet[v] === false && dist[v] <= min) \r\n                {\r\n                    min = dist[v]\r\n                    min_index = v;\r\n                }\r\n        return min_index;\r\n    }\r\n    dijkstraAnimations(s){\r\n        this.reset()\r\n        let ar=[]\r\n        for(let i=0;i<this.state.points.length;i++)\r\n        {\r\n            ar.push([])\r\n            for(let j=0;j<this.state.points.length;j++)\r\n            ar[i].push(0)\r\n        }\r\n        //forming adj matrix\r\n        for(let i=0;i<this.state.edges.length;i++)\r\n        {\r\n            ar[this.state.edges[i].u][this.state.edges[i].v]=({wt:weights[i],edgeNo:i})\r\n            ar[this.state.edges[i].v][this.state.edges[i].u]=({wt:weights[i],edgeNo:i})\r\n        }\r\n        let vis=[]\r\n        for(let i=0;i<this.state.points.length;i++)\r\n        vis[i]=false;\r\n        let animations=[]\r\n        let dist=[]\r\n        parent=[]\r\n        for(let i=0;i<this.state.points.length;i++)\r\n        dist[i]=100000\r\n        dist[s]=0\r\n        parent[s]={vertex:-1,edgeNo:-1}\r\n        animations.push({\r\n            x:s,\r\n            y:0,\r\n            color:'setdist'\r\n        })\r\n        for(let it=0;it<this.state.points.length;it++)\r\n        {\r\n            let u=this.minDist(dist,vis)\r\n            if(dist[u]===INT_MAX)\r\n            return animations;\r\n            vis[u]=true\r\n            animations.push({\r\n                x:u,\r\n                y:-1,\r\n                color:'confirmdist'\r\n            })\r\n            for(let v=0;v<this.state.points.length;v++)\r\n            {\r\n                if(!vis[v] && ar[u][v].wt && dist[u]+ar[u][v].wt<dist[v])\r\n                {\r\n                    parent[v]={vertex:u,edgeNo:ar[u][v].edgeNo}\r\n                    dist[v]=dist[u]+ar[u][v].wt\r\n                    animations.push({\r\n                        x:ar[u][v].edgeNo,\r\n                        y:-1,\r\n                        color:'edge'\r\n                    })\r\n                    animations.push({\r\n                        x:v,\r\n                        y:dist[v],\r\n                        color:'setdist'\r\n                    })\r\n                }\r\n            }\r\n        }\r\n        return animations\r\n    }\r\n\r\n    dijkstra(s){\r\n        if(s>=this.state.points.length)\r\n        return;\r\n        const animations=this.dijkstraAnimations(s)\r\n        let len=animations.length\r\n        for(let i=0;i<len;i++)\r\n        {\r\n            if(animations[i].color==='edge'){\r\n                let tm=setTimeout(() => {\r\n                    let q=document.getElementById(`edge${animations[i].x}`)\r\n                    q.style.stroke='blue'\r\n                }, i*delay);\r\n                timeouts.push(tm)\r\n            }\r\n            else if(animations[i].color==='setdist')\r\n            {\r\n                let tm=setTimeout(() => {\r\n                    let q=document.getElementById(`point${animations[i].x}`)\r\n                    q.style.fill='blue'\r\n                    q=document.getElementById(`dist${animations[i].x}`);\r\n                    q.textContent=animations[i].y\r\n                    \r\n                }, i*delay);\r\n                timeouts.push(tm);\r\n            }\r\n            else\r\n            {\r\n                let tm=setTimeout(() => {\r\n                    let q=document.getElementById(`point${animations[i].x}`)\r\n                    q.style.fill=color1\r\n                }, i*delay);\r\n                timeouts.push(tm);\r\n            }\r\n        }\r\n        done=true\r\n    }\r\n    render() {\r\n        var pts=this.state.points.map((x,idx)=>{\r\n            return(\r\n            <circle key={\"point\"+idx} id={\"point\"+idx} cx={x.x} cy={x.y} r={r} stroke=\"black\" onClick={(event)=>this.drawLine(idx)} strokeWidth=\".5\" style={{fill:\"orange\",zIndex:'1',transition:'all .2s linear',cursor:'pointer'}} onMouseOver={()=>this.showPath(idx)} onMouseOut={()=>this.removePath(idx)}/>\r\n            )\r\n        })\r\n        var ptsidx=this.state.points.map((pt,idx)=>{\r\n            return(\r\n                <text  key={\"index\"+idx} id={\"index\"+idx} fontSize=\"14\" fontFamily=\"Arial\" x={pt.x-4} y={pt.y+4} onClick={(event)=>this.drawLine(idx)} style={{zIndex:'1',fill:\"#fff\",transition:'all .2s linear',cursor:'pointer'}} onMouseOver={()=>this.showPath(idx)} onMouseOut={()=>this.removePath(idx)}>{idx}</text>\r\n            )\r\n        })\r\n        var lines=this.state.edges.map((q,idx)=>{\r\n            return(\r\n                <line key={\"edge\"+idx} id={\"edge\"+idx} x1={this.state.points[q.u].x} y1={this.state.points[q.u].y} x2={this.state.points[q.v].x} y2={this.state.points[q.v].y} style={{stroke:'red',strokeWidth:'2',zIndex:'-1',transition:'all .2s linear'}} />\r\n            )\r\n        })\r\n        var edgeWeights=this.state.edges.map((edge,idx)=>{\r\n            return(\r\n                <text key={\"weight\"+idx} id={\"weight\"+idx} fontSize=\"14\" fontFamily=\"Arial\" fill=\"#000\" x={(this.state.points[edge.u].x+this.state.points[edge.v].x)/2.0} y={(this.state.points[edge.u].y+this.state.points[edge.v].y)/2.0} >{weights[idx]}</text>\r\n            )\r\n        })\r\n        var dists=this.state.points.map((x,idx)=>{\r\n            return(\r\n                <text key={\"dist\"+idx} id={\"dist\"+idx} fontSize='14' fontFamily='Arial' fill='#000' x={x.x+r+2} y={x.y+r+2}>&infin;</text>\r\n            )\r\n        })\r\n        return (\r\n            <div>\r\n            <center>\r\n            <button onClick={()=>this.dijkstra(this.state.src)}>Djikstra's Algorithm</button>\r\n            <button onClick={()=>this.randomWeights()}>Randomize edge weights</button>\r\n            <button onClick={()=>this.reset()}>Reset</button>\r\n            <button onClick={()=>this.clear()}>Clear Canvas</button>\r\n            &nbsp;&nbsp;&nbsp;Enter source vertex &nbsp;\r\n            <input type=\"text\" id=\"src\" value={this.state.src} onChange={(e)=>this.changeSrc(e)} />\r\n            </center>\r\n            <svg paintOrder='markers' ref='svg' width={window.innerWidth} height={window.innerHeight*0.9} style={{border:'1px dotted black',backgroundColor:'rgb(251, 250, 255)',cursor:'crosshair'}} onClick={(event)=>this.getMousePosition(event)}>\r\n            {pts}\r\n            {ptsidx}\r\n            {lines}\r\n            {edgeWeights}\r\n            {dists}\r\n            </svg>\r\n            </div>\r\n        )\r\n    }\r\n}\r\n\r\nexport default ShortestPath\r\nfunction getRandomInt(min, max) {\r\n    min = Math.ceil(min);\r\n    max = Math.floor(max);\r\n    return Math.floor(Math.random() * (max - min + 1)) + min;\r\n}"]},"metadata":{},"sourceType":"module"}